---
dist: xenial
language: python

matrix:
  include:
    - python: 2.7
      env: TOXENV=py27
    - python: 3.5
      env: TOXENV=py35
    - python: 3.6
      env: TOXENV=py36
    - python: 3.7
      env: TOXENV=py37
    - env: TOXENV=flake8

install:
  - pip install tox

script:
  - tox

# Deploy a new release to PyPi for every new tag on the 'master' branch on the
# repository 'roaldnefs/salt-lint'.
deploy:
  provider: pypi
  user: __token__
  password:
    # A PyPI API token can be generated by a PyPi maintainer on:
    #  https://pypi.org/help/#apitoken
    # The API token in encrypted using `travis encrypt api-token`.
    secure: "PX/P1EKXDQp/L1MFDAUfFxGcHWWDOuFQTYnTw+iPJFqme9WcIzD/pJLqFZxDx7dWqHyaHEarnqWKGIks5qWERkpyTJz4f0l1cB1eW/9vmvEYW2AyWjI+5c47aI/G91Jz5wxCgmFfCWEsknPmcV7jPLiITLjPuIiA/cJ9qXwMP9dxpN9Ez6isDHIuQ/ZZfhlNC/Htc5B++vn5tBk0STFqr5YyhMz2xTEWErh5H5AJ07pm/32GrebxFTwegaMYocWb7oszjFFalERo5sWk4d9wnJm24BusObYsmrULjChbceyeYXWzRaKCdlPIO5G9H878I+BCr0GtVVCEAmSBTEM5eLjdFEqs6NhBEE/mWkWGwoINcMS9aku1OhE4K+cX03rQurqMhz+JIhZTI9gdDC4Nz8ZJrd0x7Mwe0BP1NvQOSpSx2/NHe63rMpfEDiCFNlieVebtIoWObMJogWcISYDPfgLAYXM+EERp+Hc+1JmGXamikA4hI+vpKGeQD5msIA48PTaUAUl1zDzLgwd17qfesxiFD9boGFk+zBgnNFIxNeTaa4PnLZ9hV3Ia1apcdCNAJ4ZrkZ/ZJdmx7UROrZIxggSm+PEvHyXXoTPKDc8/HXddDaTmdzUoBEmFP3kj74BHdXlo4a05r4DI6xP5XaN+8+2vA/ZE4y8qJe2scF2uB7o="
  on:
    repo: roaldnefs/salt-lint
    tags: true
    branch: master
    python: 3.6
    condition: "$TOXENV = py36"